(this["webpackJsonpworking-hours"]=this["webpackJsonpworking-hours"]||[]).push([[0],{34:function(e,t,a){e.exports=a(68)},40:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(25),l=a.n(o),i=a(11),c=a.n(i),s=a(26),p=a(27),u=a(28),d=a(33),m=a(32),E=a(1),v=(a(40),a(9)),S=function(e){return n.a.createElement(v.b,{to:e.link,id:e.id,className:e.idActiveButton===e.id?"tablinks active":"tablinks",onClick:e.onClick},e.text)},N=(a(46),function(e){return n.a.createElement("div",{className:"tabs-header"},n.a.createElement("div",{className:"tab"},n.a.createElement(S,{link:"/report",id:"button_report",text:"\u041e\u0442\u0447\u0435\u0442",onClick:e.tabClick,idActiveButton:e.idActiveButton}),n.a.createElement(S,{link:"/schedule",id:"button_schedule",text:"\u0413\u0440\u0430\u0444\u0438\u043a",onClick:e.tabClick,idActiveButton:e.idActiveButton})),n.a.createElement("div",{className:"date"},n.a.createElement("input",{type:"date",onChange:e.changeDate})))}),h=(a(47),a(48),function(e){return n.a.createElement("div",{className:"userTime--wrapp",id:e.id},n.a.createElement("div",{className:"user-name"},n.a.createElement("button",{onClick:e.onClickName},e.userName)),n.a.createElement("div",{className:"user-time"},n.a.createElement("button",{className:e.classButtonTime,onClick:e.clickPopap,id:e.idUser},e.userTime)),null===e.linkWork?"":n.a.createElement("div",{className:"user-work"},n.a.createElement("a",{href:e.linkWork},e.userWork)))}),R=function(e){var t=[];if(null!==e.arrayModuleReport)for(var a=0,r=Object.keys(e.arrayModuleReport.STRUCTURE);a<r.length;a++){var o=r[a],l=e.arrayModuleReport.STRUCTURE;if(0!==l[o].SHOW){t.push(n.a.createElement("div",{className:"departament--title",key:l[o].ID},l[o].NAME));for(var i=0;i<l[o].EMPLOYEES.length;i++){var c=l[o].EMPLOYEES[i],s=new Function("if (BX.IM) { BXIM.openMessenger("+e.arrayModuleReport.USERS[c].INFO.ID+"); return false; } else { window.open('', '', 'status=no,scrollbars=yes,resizable=yes,width=700,height=550,top='+Math.floor((screen.height - 550)/2-14)+',left='+Math.floor((screen.width - 700)/2-5)); return false; }");if(0!==e.arrayModuleReport.USERS[c].IS_TRACKED)var p=e.arrayModuleReport.TASKS[e.arrayModuleReport.USERS[c].IS_TRACKED].TITLE,u="https://dev-bitrix.by/company/personal/user/"+e.arrayModuleReport.USERS[c].INFO.ID+"/tasks/task/view/"+e.arrayModuleReport.USERS[c].IS_TRACKED+"/";else p=null,u=null;t.push(n.a.createElement(h,{id:e.arrayModuleReport.USERS[c].INFO.ID,key:e.arrayModuleReport.USERS[c].INFO.ID,userName:e.arrayModuleReport.USERS[c].INFO.FULL_NAME,userTime:e.arrayModuleReport.USERS[c].TIME_PRINT,classButtonTime:0===e.arrayModuleReport.USERS[c].TIME?"buttonTime":"buttonTime active",userWork:p,linkWork:u,onClickName:s,clickPopap:e.clickPopap,idUser:e.arrayModuleReport.USERS[c].INFO.ID}))}}}return t},y=function(e){return n.a.createElement("div",{className:"report--wrapp"},n.a.createElement("div",{className:"modul--head"},n.a.createElement("div",{className:"item"},"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),n.a.createElement("div",{className:"item"},"\u0412\u0440\u0435\u043c\u044f"),n.a.createElement("div",{className:"item"},"\u0417\u0430\u0434\u0430\u0447\u0430")),n.a.createElement(R,{arrayModuleReport:e.arrayModuleReport,clickPopap:e.clickPopap}))},b=a(30),M=function(e){var t=[];if(null!==e.arrayModuleReport)for(var a=0,r=Object.keys(e.arrayModuleReport.STRUCTURE);a<r.length;a++){var o=r[a],l=e.arrayModuleReport.STRUCTURE,i=0;if(0!==l[o].EMPLOYEES.length&&0!==l[o].SHOW){var c=[[{type:"string",id:"Position"},{type:"string",id:"Name"},{type:"date",id:"Start"},{type:"date",id:"End"}]];t.push(n.a.createElement("div",{className:"departament--title",key:l[o].ID},l[o].NAME));for(var s=0;s<l[o].EMPLOYEES.length;s++){var p=l[o].EMPLOYEES[s],u=[],d=[],m=e.arrayModuleReport.USERS[p];if(void 0!==m.TIMEMAN){var E=m.TIMEMAN[0].DATE_START.replace(/\s/g,":").replace(/\./g,":").split(/:/),v=m.TIMEMAN[0].DATE_FINISH.replace(/\s/g,":").replace(/\./g,":").split(/:/);u=[e.arrayModuleReport.USERS[p].INFO.FULL_NAME,"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u0432\u0440\u0435\u043c\u044f",new Date(Number(E[2]),Number(E[1]-1),Number(E[0]),Number(E[3]),Number(E[4],Number(E[5]))),new Date(Number(v[2]),Number(v[1]-1),Number(v[0]),Number(v[3]),Number(v[4],Number(v[5])))]}if(0!==u.length&&(i+=41,c.push(u)),void 0!==e.arrayModuleReport.USERS[p].TASKS_ELAPSED){var S=e.arrayModuleReport.USERS[p].TASKS_ELAPSED;i+=31;for(var N=0,h=Object.keys(S);N<h.length;N++)for(var R=h[N],y=0;y<S[R].length;y++)if(void 0!==S[R][y].ID){var M=S[R][y].DATE_START.replace(/\s/g,":").replace(/\./g,":").split(/:/),f=S[R][y].DATE_STOP.replace(/\s/g,":").replace(/\./g,":").split(/:/),k=S[R][y].TASK_ID;d=[e.arrayModuleReport.USERS[p].INFO.FULL_NAME,e.arrayModuleReport.TASKS[k].TITLE,new Date(Number(M[2]),Number(M[1]-1),Number(M[0]),Number(M[3]),Number(M[4]),Number(M[5])),new Date(Number(f[2]),Number(f[1]-1),Number(f[0]),Number(f[3]),Number(f[4]),Number(f[5]))],c.push(d)}}}t.push(n.a.createElement(b.a,{key:"STRUCTURE"+l[o].ID,width:"100%",height:i+50+"px",chartType:"Timeline",loader:n.a.createElement("div",null,"Loading Chart"),data:c,rootProps:{"data-testid":"6"}}))}}return t},f=function(e){return n.a.createElement("div",{className:"schedule--wrapp"},n.a.createElement("div",{className:"modul--head"},n.a.createElement("div",{className:"item"},"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),n.a.createElement("div",{className:"item"},"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u0432\u0440\u0435\u043c\u044f/\u0417\u0430\u0434\u0430\u0447\u0430")),n.a.createElement(M,{arrayModuleReport:e.arrayModuleReport}))},k=function(e){var t=e.arrayModuleReport.USERS[e.popapIdUser].TASKS,a=[];if(0!==Object.keys(t).length)for(var r=0,o=Object.keys(t);r<o.length;r++){var l=o[r],i=e.arrayModuleReport.TASKS[l].TITLE,c=e.arrayModuleReport.TASKS[l].ID,s="https://dev-bitrix.by/company/personal/user/"+e.popapIdUser+"/tasks/task/view/"+l+"/",p=t[c],u=Math.floor(p/60/60),d=Math.floor(p/60)-60*u,m=p%60,E=[u.toString().padStart(2,"0"),d.toString().padStart(2,"0"),m.toString().padStart(2,"0")].join(":");a.push(n.a.createElement("div",{className:"task--item",key:"timeID"+c},n.a.createElement("div",{className:"task--name"},n.a.createElement("a",{href:s},i)),n.a.createElement("div",{className:"task--time"},E)))}return a},T=(a(49),function(e){var t=e.arrayModuleReport.USERS[e.popapIdUser].INFO.FULL_NAME;return n.a.createElement("div",{className:"popup--wrap"},n.a.createElement("div",{className:"popup--item"},n.a.createElement("button",{className:"popup--close",onClick:e.popapHide}),n.a.createElement("div",{className:"name"},t+". ","\u0417\u0430\u0434\u0430\u0447\u0438 \u0437\u0430 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u0435\u043d\u044c"),n.a.createElement("div",{className:"popup--container"},n.a.createElement("div",{className:"modul--head"},n.a.createElement("div",{className:"item"},"\u0417\u0430\u0434\u0430\u0447\u0430"),n.a.createElement("div",{className:"item"},"\u0412\u0440\u0435\u043c\u044f")),n.a.createElement(k,{arrayModuleReport:e.arrayModuleReport,popapIdUser:e.popapIdUser}))))}),g=a(14),I=a.n(g),A=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={idActiveButton:"button_report",arrayModuleReport:null,popapActive:!1,popapIdUser:null,date:(new Date).toJSON().slice(0,10).replace(/-/g,".")},e.tabClick=function(t){var a=t.target.id;e.setState({idActiveButton:a})},e.popapVisible=function(t){t.preventDefault();var a=t.target.id;e.setState({popapActive:!0,popapIdUser:a})},e.popapHide=function(t){t.preventDefault(),e.setState({popapActive:!1})},e.changeDate=function(t){var a=t.target.value.replace(/-/g,"."),r=a.split(/\./)[2]+"."+a.split(/\./)[1]+"."+a.split(/\./)[0];I.a.get("https://dev-bitrix.by/pub/user_tracking/?date="+r+"&secretKey=romchikreact").then((function(t){return e.setState({arrayModuleReport:t.data})})),e.setState({date:r})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.date.split(/\./)[2]+"."+this.state.date.split(/\./)[1]+"."+this.state.date.split(/\./)[0],I.a.get("https://dev-bitrix.by/pub/user_tracking/?date="+t+"&secretKey=romchikreact").then((function(e){return a.setState({arrayModuleReport:e.data})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.idActiveButton,r=t.arrayModuleReport,o=t.popapActive,l=t.popapIdUser;return n.a.createElement("div",{className:"App"},n.a.createElement(N,{tabClick:this.tabClick,idActiveButton:a,changeDate:this.changeDate}),n.a.createElement(E.a,{exact:!0,path:["/","/report"],render:function(t){return n.a.createElement(y,Object.assign({},t,{arrayModuleReport:r,clickPopap:e.popapVisible}))}}),n.a.createElement(E.a,{exact:!0,path:["/schedule"],render:function(e){return n.a.createElement(f,Object.assign({},e,{arrayModuleReport:r}))}}),!1===o?"":n.a.createElement(T,{popapHide:this.popapHide,arrayModuleReport:r,popapIdUser:l}))}}]),a}(r.Component);a(67);l.a.render(n.a.createElement(v.a,null,n.a.createElement(A,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.fbbcff1f.chunk.js.map