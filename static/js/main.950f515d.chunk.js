(this["webpackJsonpworking-hours"]=this["webpackJsonpworking-hours"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"install":{"pagelink":"https://dev-bitrix.by/pub/user_tracking/?date=","domain":"https://dev-bitrix.by"}}')},35:function(e,a,t){e.exports=t(69)},41:function(e,a,t){},47:function(e,a,t){},48:function(e,a,t){},49:function(e,a,t){},50:function(e,a,t){},68:function(e,a,t){},69:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(26),i=t.n(o),l=t(11),p=t.n(l),c=t(27),s=t(28),u=t(29),d=t(34),m=t(33),E=t(1),v=(t(41),t(9)),S=function(e){return n.a.createElement(v.b,{to:e.link,id:e.id,className:e.idActiveButton===e.id?"tablinks active":"tablinks",onClick:e.onClick},e.text)},N=(t(47),function(e){return n.a.createElement("div",{className:"tabs-header"},n.a.createElement("div",{className:"tab"},n.a.createElement(S,{link:"/report",id:"button_report",text:"\u041e\u0442\u0447\u0435\u0442",onClick:e.tabClick,idActiveButton:e.idActiveButton}),n.a.createElement(S,{link:"/schedule",id:"button_schedule",text:"\u0413\u0440\u0430\u0444\u0438\u043a",onClick:e.tabClick,idActiveButton:e.idActiveButton})),n.a.createElement("div",{className:"date"},n.a.createElement("input",{type:"date",onChange:e.changeDate})))}),R=(t(48),t(49),function(e){return n.a.createElement("div",{className:"userTime--wrapp",id:e.id},n.a.createElement("div",{className:"user-name"},n.a.createElement("button",{onClick:e.onClickName},e.userName)),n.a.createElement("div",{className:"user-time"},n.a.createElement("button",{className:e.classButtonTime,onClick:e.clickPopap,id:e.idUser},e.userTime)),null===e.linkWork?"":n.a.createElement("div",{className:"user-work"},n.a.createElement("a",{href:e.linkWork},e.userWork)))}),h=function(e){var a=[];if(null!==e.arrayModuleReport)for(var t=0,r=Object.keys(e.arrayModuleReport.STRUCTURE);t<r.length;t++){var o=r[t],i=e.arrayModuleReport.STRUCTURE;if(0!==i[o].SHOW){a.push(n.a.createElement("div",{className:"departament--title",key:i[o].ID},i[o].NAME));for(var l=0;l<i[o].EMPLOYEES.length;l++){var p=i[o].EMPLOYEES[l],c=new Function("if (BX.IM) { BXIM.openMessenger("+e.arrayModuleReport.USERS[p].INFO.ID+"); return false; } else { window.open('', '', 'status=no,scrollbars=yes,resizable=yes,width=700,height=550,top='+Math.floor((screen.height - 550)/2-14)+',left='+Math.floor((screen.width - 700)/2-5)); return false; }");if(0!==e.arrayModuleReport.USERS[p].IS_TRACKED)var s=e.arrayModuleReport.TASKS[e.arrayModuleReport.USERS[p].IS_TRACKED].TITLE,u=e.pageDomain+"/company/personal/user/"+e.arrayModuleReport.USERS[p].INFO.ID+"/tasks/task/view/"+e.arrayModuleReport.USERS[p].IS_TRACKED+"/";else s=null,u=null;a.push(n.a.createElement(R,{id:e.arrayModuleReport.USERS[p].INFO.ID,key:e.arrayModuleReport.USERS[p].INFO.ID,userName:e.arrayModuleReport.USERS[p].INFO.FULL_NAME,userTime:e.arrayModuleReport.USERS[p].TIME_PRINT,classButtonTime:0===e.arrayModuleReport.USERS[p].TIME?"buttonTime":"buttonTime active",userWork:s,linkWork:u,onClickName:c,clickPopap:e.clickPopap,idUser:e.arrayModuleReport.USERS[p].INFO.ID}))}}}return a},y=function(e){return n.a.createElement("div",{className:"report--wrapp"},n.a.createElement("div",{className:"modul--head"},n.a.createElement("div",{className:"item"},"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),n.a.createElement("div",{className:"item"},"\u0412\u0440\u0435\u043c\u044f"),n.a.createElement("div",{className:"item"},"\u0417\u0430\u0434\u0430\u0447\u0430")),n.a.createElement(h,{arrayModuleReport:e.arrayModuleReport,clickPopap:e.clickPopap,pageDomain:e.pageDomain}))},M=t(31),b=function(e){var a=[];if(null!==e.arrayModuleReport)for(var t=0,r=Object.keys(e.arrayModuleReport.STRUCTURE);t<r.length;t++){var o=r[t],i=e.arrayModuleReport.STRUCTURE,l=0;if(0!==i[o].EMPLOYEES.length&&0!==i[o].SHOW){var p=[[{type:"string",id:"Position"},{type:"string",id:"Name"},{type:"date",id:"Start"},{type:"date",id:"End"}]];a.push(n.a.createElement("div",{className:"departament--title",key:i[o].ID},i[o].NAME));for(var c=0;c<i[o].EMPLOYEES.length;c++){var s=i[o].EMPLOYEES[c],u=[],d=[],m=e.arrayModuleReport.USERS[s];if(void 0!==m.TIMEMAN){var E=m.TIMEMAN[0].DATE_START.replace(/\s/g,":").replace(/\./g,":").split(/:/),v=m.TIMEMAN[0].DATE_FINISH.replace(/\s/g,":").replace(/\./g,":").split(/:/);u=[e.arrayModuleReport.USERS[s].INFO.FULL_NAME,"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u0432\u0440\u0435\u043c\u044f",new Date(Number(E[2]),Number(E[1]-1),Number(E[0]),Number(E[3]),Number(E[4],Number(E[5]))),new Date(Number(v[2]),Number(v[1]-1),Number(v[0]),Number(v[3]),Number(v[4],Number(v[5])))]}if(0!==u.length&&(l+=41,p.push(u)),void 0!==e.arrayModuleReport.USERS[s].TASKS_ELAPSED){var S=e.arrayModuleReport.USERS[s].TASKS_ELAPSED;l+=31;for(var N=0,R=Object.keys(S);N<R.length;N++)for(var h=R[N],y=0;y<S[h].length;y++)if(void 0!==S[h][y].ID){var b=S[h][y].DATE_START.replace(/\s/g,":").replace(/\./g,":").split(/:/),k=S[h][y].DATE_STOP.replace(/\s/g,":").replace(/\./g,":").split(/:/),f=S[h][y].TASK_ID;d=[e.arrayModuleReport.USERS[s].INFO.FULL_NAME,e.arrayModuleReport.TASKS[f].TITLE,new Date(Number(b[2]),Number(b[1]-1),Number(b[0]),Number(b[3]),Number(b[4]),Number(b[5])),new Date(Number(k[2]),Number(k[1]-1),Number(k[0]),Number(k[3]),Number(k[4]),Number(k[5]))],p.push(d)}}}a.push(n.a.createElement(M.a,{key:"STRUCTURE"+i[o].ID,width:"100%",height:l+50+"px",chartType:"Timeline",loader:n.a.createElement("div",null,"Loading Chart"),data:p,rootProps:{"data-testid":"6"}}))}}return a},k=function(e){return n.a.createElement("div",{className:"schedule--wrapp"},n.a.createElement("div",{className:"modul--head"},n.a.createElement("div",{className:"item"},"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),n.a.createElement("div",{className:"item"},"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u0432\u0440\u0435\u043c\u044f/\u0417\u0430\u0434\u0430\u0447\u0430")),n.a.createElement(b,{arrayModuleReport:e.arrayModuleReport}))},f=function(e){var a=e.arrayModuleReport.USERS[e.popapIdUser].TASKS,t=[];if(0!==Object.keys(a).length)for(var r=0,o=Object.keys(a);r<o.length;r++){var i=o[r],l=e.arrayModuleReport.TASKS[i].TITLE,p=e.arrayModuleReport.TASKS[i].ID,c=e.pageDomain+"/company/personal/user/"+e.popapIdUser+"/tasks/task/view/"+i+"/",s=a[p],u=Math.floor(s/60/60),d=Math.floor(s/60)-60*u,m=s%60,E=[u.toString().padStart(2,"0"),d.toString().padStart(2,"0"),m.toString().padStart(2,"0")].join(":");t.push(n.a.createElement("div",{className:"task--item",key:"timeID"+p},n.a.createElement("div",{className:"task--name"},n.a.createElement("a",{href:c},l)),n.a.createElement("div",{className:"task--time"},E)))}return t},g=(t(50),function(e){var a=e.arrayModuleReport.USERS[e.popapIdUser].INFO.FULL_NAME;return n.a.createElement("div",{className:"popup--wrap"},n.a.createElement("div",{className:"popup--item"},n.a.createElement("button",{className:"popup--close",onClick:e.popapHide}),n.a.createElement("div",{className:"name"},a+". ","\u0417\u0430\u0434\u0430\u0447\u0438 \u0437\u0430 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u0435\u043d\u044c"),n.a.createElement("div",{className:"popup--container"},n.a.createElement("div",{className:"modul--head"},n.a.createElement("div",{className:"item"},"\u0417\u0430\u0434\u0430\u0447\u0430"),n.a.createElement("div",{className:"item"},"\u0412\u0440\u0435\u043c\u044f")),n.a.createElement(f,{pageDomain:e.pageDomain,arrayModuleReport:e.arrayModuleReport,popapIdUser:e.popapIdUser}))))}),T=t(14),I=t.n(T),A=t(15),D=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={idActiveButton:"button_report",arrayModuleReport:null,popapActive:!1,popapIdUser:null,date:(new Date).toJSON().slice(0,10).replace(/-/g,"."),pageLink:A.install.pagelink,pageDomain:A.install.domain},e.tabClick=function(a){var t=a.target.id;e.setState({idActiveButton:t})},e.popapVisible=function(a){a.preventDefault();var t=a.target.id;e.setState({popapActive:!0,popapIdUser:t})},e.popapHide=function(a){a.preventDefault(),e.setState({popapActive:!1})},e.changeDate=function(a){var t=a.target.value.replace(/-/g,"."),r=t.split(/\./)[2]+"."+t.split(/\./)[1]+"."+t.split(/\./)[0];I.a.get(e.state.pageLink+r).then((function(a){return e.setState({arrayModuleReport:a.data})})),e.setState({date:r})},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(p.a.mark((function e(){var a,t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.state.date.split(/\./)[2]+"."+this.state.date.split(/\./)[1]+"."+this.state.date.split(/\./)[0],I.a.get(this.state.pageLink+a).then((function(e){return t.setState({arrayModuleReport:e.data})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.idActiveButton,r=a.arrayModuleReport,o=a.popapActive,i=a.popapIdUser,l=a.pageDomain;return n.a.createElement("div",{className:"App"},n.a.createElement(N,{tabClick:this.tabClick,idActiveButton:t,changeDate:this.changeDate}),n.a.createElement(E.a,{exact:!0,path:["/","/report"],render:function(a){return n.a.createElement(y,Object.assign({},a,{arrayModuleReport:r,clickPopap:e.popapVisible,pageDomain:l}))}}),n.a.createElement(E.a,{exact:!0,path:["/schedule"],render:function(e){return n.a.createElement(k,Object.assign({},e,{arrayModuleReport:r}))}}),!1===o?"":n.a.createElement(g,{popapHide:this.popapHide,arrayModuleReport:r,popapIdUser:i,pageDomain:l}))}}]),t}(r.Component);t(68);i.a.render(n.a.createElement(v.a,null,n.a.createElement(D,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.950f515d.chunk.js.map